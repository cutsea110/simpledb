<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
	  $.each(["naive", "naivebis", "fifo", "lru", "clock"], function(i, bm) {
	      $.each(["basic", "heuristic"], function(j, qp) {
		  $.getJSON(`./tiny/summary/${bm}_${qp}_metrics.json`, function(data) {
		      console.log(data);
		      var rw_data = new google.visualization.arrayToDataTable(data["rw"]);
		      new google.visualization.ComboChart(document.getElementById(`rw_${bm}_${qp}`))
			  .draw(rw_data,
				{title:`read/written blocks & total elapsed time [${bm}, ${qp}]`,
				 width:600, height:400,
				 isStacked: true,
				 vAxis: {
				     0: {title: "read+written blocks"},
				     1: {title: "elapsed time (sec)"},
				 },
				 hAxis: {title: `construction [block size x buffer size]`},
				 series: {
				     0: {type: 'bars', targetAxisIndex: 0},
				     1: {type: 'bars', targetAxisIndex: 0},
				     2: {type: 'line', targetAxisIndex: 1},
				 }
				});

		      var cache_data = new google.visualization.arrayToDataTable(data["cache"]);
		      new google.visualization.ComboChart(document.getElementById(`cache_${bm}_${qp}`))
			  .draw(cache_data,
				{title:`cache hit/assign pages & ratio [${bm}, ${qp}]`,
				 width:600, height:400,
				 isStacked: true,
				 vAxis: {
				     0: {title: "pages"},
				     1: {title: "ratio (%%)"},
				 },
				 hAxis: {title: `construction [block size x buffer size]`},
				 series: {
				     0: {type: 'bars', targetAxisIndex: 0},
				     1: {type: 'bars', targetAxisIndex: 0},
				     2: {type: 'line', targetAxisIndex: 1},
				 }
				});
		  });
	      });
	  });

	  $.each(["400", "1000", "4000"], function(i, blksz) {
	      $.each(["8", "32", "128"], function(j, bfsz) {
		  $.getJSON(`./tiny/summary/${blksz}x${bfsz}_metrics.json`, function(data) {
		      console.log(data);
		      var rw_data = new google.visualization.arrayToDataTable(data["rw"]);
		      new google.visualization.ComboChart(document.getElementById(`rw_${blksz}x${bfsz}`))
			  .draw(rw_data,
				{title:`read/written blocks & total elapsed time [${blksz}x${bfsz}]`,
				 width:600, height:400,
				 isStacked: true,
				 vAxis: {
				     0: {title: "read+written blocks"},
				     1: {title: "elapsed time (sec)"},
				 },
				 hAxis: {title: `construction [buffer manager, query planner]`},
				 series: {
				     0: {type: 'bars', targetAxisIndex: 0},
				     1: {type: 'bars', targetAxisIndex: 0},
				     2: {type: 'line', targetAxisIndex: 1},
				 }
				});

		      var cache_data = new google.visualization.arrayToDataTable(data["cache"]);
		      new google.visualization.ComboChart(document.getElementById(`cache_${blksz}x${bfsz}`))
			  .draw(cache_data,
				{title:`cache hit/assign pages & ratio [${blksz}x${bfsz}]`,
				 width:600, height:400,
				 isStacked: true,
				 vAxis: {
				     0: {title: "pages"},
				     1: {title: "ratio (%%)"},
				 },
				 hAxis: {title: `construction [buffer manager, query planner]`},
				 series: {
				     0: {type: 'bars', targetAxisIndex: 0},
				     1: {type: 'bars', targetAxisIndex: 0},
				     2: {type: 'line', targetAxisIndex: 1},
				 }
				});
		  });
	      });
	  });
      }
    </script>
  </head>
  <body>
    <table>
      <!-- fix buffer-manager and query-planner -->
      <tr>
	<td><div id="rw_naive_basic"></div></td>
	<td><div id="cache_naive_basic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_naivebis_basic"></div></td>
	<td><div id="cache_naivebis_basic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_fifo_basic"></div></td>
	<td><div id="cache_fifo_basic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_lru_basic"></div></td>
	<td><div id="cache_lru_basic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_clock_basic"></div></td>
	<td><div id="cache_clock_basic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_naive_heuristic"></div></td>
	<td><div id="cache_naive_heuristic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_naivebis_heuristic"></div></td>
	<td><div id="cache_naivebis_heuristic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_fifo_heuristic"></div></td>
	<td><div id="cache_fifo_heuristic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_lru_heuristic"></div></td>
	<td><div id="cache_lru_heuristic"></div></td>
      </tr>
      <tr>
	<td><div id="rw_clock_heuristic"></div></td>
	<td><div id="cache_clock_heuristic"></div></td>
      </tr>
      <!-- fix block-size and buffer-size -->
      <tr>
	<td><div id="rw_400x8"></div></td>
	<td><div id="cache_400x8"></div></td>
      </tr>
      <tr>
	<td><div id="rw_400x32"></div></td>
	<td><div id="cache_400x32"></div></td>
      </tr>
      <tr>
	<td><div id="rw_400x128"></div></td>
	<td><div id="cache_400x128"></div></td>
      </tr>
      <tr>
	<td><div id="rw_1000x8"></div></td>
	<td><div id="cache_1000x8"></div></td>
      </tr>
      <tr>
	<td><div id="rw_1000x32"></div></td>
	<td><div id="cache_1000x32"></div></td>
      </tr>
      <tr>
	<td><div id="rw_1000x128"></div></td>
	<td><div id="cache_1000x128"></div></td>
      </tr>
      <tr>
	<td><div id="rw_4000x8"></div></td>
	<td><div id="cache_4000x8"></div></td>
      </tr>
      <tr>
	<td><div id="rw_4000x32"></div></td>
	<td><div id="cache_4000x32"></div></td>
      </tr>
      <tr>
	<td><div id="rw_4000x128"></div></td>
	<td><div id="cache_4000x128"></div></td>
      </tr>
    </table>
  </body>
</html>
